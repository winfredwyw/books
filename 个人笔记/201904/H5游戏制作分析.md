# 一、游戏项目分工与协作概要
### 游戏开发的一个总体流程，这里以ARPG游戏为例：
#### 策划：
1.主策：负责把控整个系统的玩法和设计和后期的规划，例如包括pvp玩法，pve玩法。

2.数值策划：负责整个游戏的数值的把控，包括角色的基本数值，成长数值，装备，技能的数值等。

3.系统策划：负责对各个系统个规划，并能够配置相应的配置表，例如：语言系统，角色系统，道具系统，技能系统，地图系统等方面
#### 美术:
1.主美:负责对整个游戏的风格进行统一和对资源进行严格的把控，在游戏开发中，资源是一个很重要的东西，能够做到资源小，复用性高，扩展性高。

2.UI：负责各个系统的UI的制作和切图。

3.动画特效：负责时间轴动画，粒子动画，序列动画等实现。

4.原画：负责对各个场景，人物，动作等进行设计和实现。
#### 开发：
1.主程:负责对框架的实现，游戏核心玩法的实现，能够为策划提供各种编辑器，例如，地图编辑器等。对策划各个需求进行分析，指导下属用最合适的实现方式去实现。

2.成员:游戏后期可能会分不同的子线出来，例如系统线，运营活动线。这个时候就需要根据成员的能力和意愿进行分配，实现对各个策划案的实现。

# 二、H5游戏开发的引擎介绍与选择

原生手游市场已是红海，腾讯、网易等寡头独霸天下，H5游戏市场或将成为下一个风口。据笔者所知，很多H5游戏开发团队由于选择引擎不慎导致项目甚至团队夭折。如何选择适合团队和项目的引擎，笔者通过学习和项目实践，总结微薄经验，供大家参考，非技术人员也可以将本篇内容作为引擎选择的重要关注点。

##### 选择H5游戏引擎的思考维度

- 开发语言的支持
- 2D、3D、VR的支持
- 性能
- 引擎的应用广度
- 设计理念
- 工作流支持力度
- 商业化成熟案例
- 学习资源与技术支持能力

首先，我们要知道，当前主流的游戏引擎有哪些。由于H5引擎有很多，笔者在这里进行了精心的筛选，过滤掉不支持webGL的引擎，以及封装了第三方渲染内核的JS框架，和不能直接在浏览器中运行的JS引擎。

为什么要过滤掉这几种呢，首先，没有自己的渲染内核，仅仅是基于第三方的内核作的API封装，笔者很担心可持续的性能优化和维护能力。另外，不能在浏览器中直接运行的JS引擎，将限制H5游戏跨平台的交互能力。还有， 笔者非常看好webGL模式，认为webGL模式才是H5引擎的未来。原因有几点：

- 第一、性能，webGL模式远超Canvas数倍。DOM模式就不适合用于真正的游戏开发，更不用提。
- 第二、3D方向，webGL模式理论上可以制作2D和3D游戏，Canvas和DOM模式下只能制作2D游戏。
- 第三、普及率，webGL的普及率已经非常高了，尤其是支持webGL的腾讯TBS-Blink内核已在4月19日发布，并逐步在微信、QQ空间、QQ浏览器、手机QQ等APP中采用静默安装方式全面升级。这个普及率在国内带来的影响;

##### 1、选择H5游戏开发语言

拥有广泛开发者的H5游戏开发语言共有三种，分别为Flash AS3、TypeScript、JavaScript。其中Flash AS3、TypeScript均属于面向对象的高级脚本语言，通过编译器将原项目代码编译成JavaScript代码文件运行于浏览器之中，面向对象的高级语言无论是项目开发管理，还是项目开发的工具环境的成熟度都明显优于JavaScript脚本语言，尤其是中大型项目方面，AS3等高级语言的效率会更高。

![图片名称](https://ceph-dev-pub.dz11.com/fed-doc/1521690094.jpg)


从上图看出，支持JavaScript语言的引擎更多，由于AS3语言的编译器为Layabox引擎推出的，因此采用AS3作为开发语言的仅有Layabox引擎。笔者建议在开发中大型游戏项目的时候，采用TypeScript或者是Flash AS3语言进行开发。如果是小型游戏，任选其一即可。

##### 2、引擎的未来延续能力

选择一个引擎，并不是简单的认为，满足眼前够用就可以了，引擎的未来延续能力也是很重要的，这个项目是2D，下个项目想开发3D，如果引擎不支持怎么办？去换个引擎？如果VR的机会来了，再想发布VR版本，这个引擎不支持，需要重新开发吗？等等问题，作为开发者尽可能要提前想好。

![图片名称](https://ceph-dev-pub.dz11.com/fed-doc/1521690113.jpg)


通过上图，可以看出，即便是在支持webGL的H5引擎里，有只面向2D游戏的，也有只面向3D游戏的，同时支持2D、3D、VR的H5引擎，从目前看只有Layabox与Egret引擎。

##### 3、性能是核心需求

性能是H5游戏面临的核心门槛，也是很多H5游戏不被专业玩家认可的重要原因之一。游戏卡顿，不流畅，这样的产品体验很难在激烈竞争中生存下来。

H5产业早期的普及阶段即将过去，游戏品质在迅速提高，品质中包括精细的美术和炫酷的动画等。在复杂的游戏项目面前，上述种种元素，其流畅体验度对游戏引擎是极大的考验。所以选择性能优秀的引擎是保证品质的最重要基础，一定要谨慎。

在游戏项目研发开始时，一定要先对复杂的模块做DEMO测试，特别是带背景滚动的游戏。比如横屏卷轴游戏，对帧数稳定性要求极高，如果满足不了性能上的需求，可能会带来眩晕、眼花、疲倦等不良体验。



在webGL的2D渲染性能方面，pixi.js的性能处于当前的顶级。在webGL的3D渲染性能方面，Three.js非常优秀。在runtime方面Cocos2d-js也有着原生级的表现，经过对比，笔者认为Layabox性能的综合实力最强，在各个渲染领域都保持在HTML5引擎的顶级水平。当然，上图仅作为参考，对于任何号称某个引擎性能最牛的论调，一定要亲自进行性能DEMO的测试对比，而不要轻易采信。

由于性能是游戏最核心的需求，笔者这里再多说一句，大型项目在系统复杂度、UI复杂度、动画显示数量和种类等方面与小型游戏项目完全不在一个量级。会涉及到比小游戏更复杂的性能优化、内存管理、资源管理等需求，如果选择了小马拉大车的低性能引擎，项目夭折可能性非常大，除非最后项目开发者花大量时间自己优化引擎。所以性能差一点，就会导致结果差很多，不可主观想象。

##### 4、与引擎的应用广度

随着H5游戏品质提升，在其他领域也具备一定的竞争力和价值，一次开发可发行各个领域版本，已成为日渐明确的需求，这里面包括发行原生APP手游和PC的flash页游需求，大统一的引擎时代即将来领。目前最火爆的H5游戏《传奇世界H5》据说有40%的收入来自PC网页。

发布PC页游时，由于PC浏览器目前对HTML5兼容性不足70%，用户损耗很大，页游联运平台可能会拒绝或放量很少，只有采用能同时发布Flash版本的引擎，才能解决这个问题。



##### 5、设计理念与定位

设计理念是个比较大的话题，也是个很重要的引擎选择因素，比如引擎是要专注移动端，还是要面向全平台多端游戏市场。是注重性能，还是注重工具链等等。深入了解不同引擎的理念与定位，才能更好的与游戏产品进行结合。



上图内容仅作参考，详情建议去各引擎官网深入了解。

##### 6、工作流支持力度

作为商业级开源引擎，工具链的提供与支持也是一种选择考量要素，比如UI编辑器、粒子编辑器、骨骼编辑器、场景编辑器等等，如果引擎方直接提供或支持，那么将会较大的提升研发效率。
本文中提到的7个引擎，只有Egret、Layabox、Cocos2d-JS这三个引擎，在工具链方面提供足够全面的支撑。

##### 7、是否有成熟的商业案例

怎么证明引擎是成熟的？一定要有成熟的商业案例，一般引擎的官网上都会有游戏案例介绍，我们在选择引擎之前要进行深入体验，包括：商业案例的数量、商业案例的种类、稳定性、流畅度（要在低端机里体验）、项目复杂度、项目相似度等。如果有一些大型成功案例背书会相对安全可靠些。
从目前的行业案例来看，Layabox引擎的MMORPG《醉西游》、重度动作游戏《猎刃2》、大型模拟经营游戏《梦幻家园》等无疑是H5引擎技术的最高水准代表作。但是从卡牌、挂机等类型的付费游戏总体数量来看，Egret引擎明显占优，充分说明该引擎的市场宣传力度更胜一筹。

##### 8、学习资源与技术支持能力

能提供什么样的学习资源，以及技术支持，对于开发者也是重要因素，如果你是技术大牛，只想使用轻量的第三方渲染内核。那么2D游戏，pixi.js无疑是首选。3D游戏，笔者推荐Three.js。但是这两种引擎的学习资料都比较稀少。笔者认为学习资料的完善，以及在学习过程中的技术支持力度，将会很大的帮助你解决引擎使用中的问题。所以，API完善，DEMO完善，文档完善，社区的响应速度，交流氛围，以及QQ技术支持等，都可以作为你选择引擎的因素考量之一。

##### 9、页游移植产品的引擎选择

目前像《醉西游》等优秀H5产品是Flash页游或手游移植而成，移植类的产品在选用引擎时要注意，代码是否可以直接移植？如果可以，那将节省大量的开发成本。比如Flash AS3开发的2D或3D页游或手游，可以把逻辑与算法代码直接拷贝移植到Layabox引擎项目中，开发速度提高数倍。

写在最后：最后提醒一下，千万不要相信某些引擎的单方宣传，一定要花一点时间去研究实践，亲自制作DEMO去作一作对比，动手体验到的才是真理。

针对DEMO测试有几点建议：

- 采用一个复杂的UI，特别是复杂列表，比如说没有分页的背包列表，背包里放上不同的道具图片，测试滑动时的流畅度，这块比较考验性能，元素越复杂，数据越多，尤其能对比出来性能上的差异。
 
- 包含最复杂战斗部分，不要写战斗逻辑代码，不然会花的时间太长，只需要把战斗相关的动画和复杂的元素放在场景中模拟即可，因为H5游戏性能瓶颈通常在于画面的显示。

- 测试主要目的是看项目在引擎中性能，这是最至关重要的，所以，硬件上，我们要选择低端安卓手机（比如红米）进行测试。软件环境建议使用微信环境测试，首先，因为微信公众号是H5的主要渠道之一，其次，微信当前的H5性能低于chrome浏览器，在恶劣的环境下更能测试引擎的优劣。


# 三、H5游戏引擎LayaBox介绍
### Layabox简介
- LayaBox是中国领先的游戏引擎提供商和综合服务商，旗下第二代引擎LayaAir是基于HTML5协议的全能型开源引擎。LayaAir突破性的将2D、3D、AR、VR和页游、Native手游、HTML5游戏等诸多需求通过一个引擎得以完美统一。目前引擎已被腾讯、Forgame、37游戏、仙海网络、胡莱游戏、蝴蝶互动等200多家游戏厂商采用。另外，LayaBox还以一键对接SDK、项目投资、游戏代理等方式，为研发商提供游戏发行服务。

- LayaBox是2000年可乐吧创始人谢成鸿倾力打造的HTML5游戏引擎品牌，旗下产品为PC页游、APP手游、HTML5游戏提供了三端融合的技术解决方案。为手机游戏市场提供了HTML5与APP体验相同、数据互通的全新游戏模式，为APP游戏提供了全新的HTML5试玩推广营销模式。也为游戏的发行与运营提供了全方位的解决方案。LayaBox核心产品包括：全能型游戏引擎（LayaAir）、集成开发环境（LayaAirIDE）、H5游戏的原生服务（LayaNative）、发行对接服务（LayaOpen）、游戏商城服务（LayaStore）



##### LayaAir引擎概述
- LayaAir是Layabox旗下第二代HTML5开源引擎，是全球性能最高的HTML5引擎之一。[1]  LayaAir突破性的将2D、3D、AR、VR和页游、Native手游、HTML5游戏等诸多需求通过一个引擎得以统一。[2]  目前引擎已被腾讯、Forgame、37玩、仙海、胡莱、蝴蝶互动等200多家知名厂商采用。

- LayaAir是LayaBox旗下第二代HTML5开源引擎，因能开发中大型HTML5重度游戏、性能极其优秀而迅速崛起，已成为HTML5行业公认的开发中大型游戏首选引擎。2016年6月30日，正式发布1.0版，增加了APP版和Flash页游发布功能，全球首次实现了一次开发，同时发布HTML5、APP、Flash页游三种版本。[4]  LayaAir试图通过大统一的模式，帮研发商获取更多利益，在不影响原有业务的基础上，快速进入高速发展HTML5领域。
### LAYABOX适用领域
除支持2D\3D\VR\AR的Flash页游、HTML5游戏、APP游戏开发外，引擎还可以用于应用软件、广告、营销、教育、医疗等众多领域
### Layabox核心产品介绍
####  LayaAir：
LayaAir是支持多种语言（ActionScript3、TypeScript、JavaScript）开发的HTML5引擎，具备极强（同时支持2D/3D/VR/AR、支持UI库、缓动动画、序列帧动画、骨骼动画、顶点动画、粒子系统、网络、物理系统等），极快（性能媲美APP），极广（可应用于：小型游戏、大型游戏、广告、教育、营销、APP等行业），编辑器强大等特性，支持一次开发同时发布APP、HTML5、Flash三个版本的全能型游戏引擎
#### LayaAirIDE：
LayaAirIDE是LayaAir引擎的集成开发环境，HTML5游戏开发的高效可视化工具。主要包括代码编辑器、UI编辑器、粒子编辑器、动画编辑器、场景编辑器、资源转换器（支持Spine与DragonBones骨骼动画、swf动画、Unity3D资源等）。
####  LayaNative：
LayaNative包括了HTML5运行器（Runtime）、安卓打包工具、IOS打包工具、安卓APP渠道一键打包对接工具等原生打包相关的产品。[29]  LayaOpen：LayaOpen以开放平台为核心，涵盖HTML5游戏代理发行、联运合作、渠道、市场、产品优化服务、HTML5渠道一键对接，游戏测试与上架，数据统计与结算等游戏发行相关的服务。
####  LayaStore：
LayaStore是HTML5游戏运营平台，包括嵌入式HTML5游戏商城、HTML5自有流量商城。目前LayaBox已合作对接了近800家主流渠道，其中包括了腾讯QQ浏览器、腾讯玩吧、腾讯游戏大厅、百度、新浪微博、4399、YY游戏、猎豹、酷狗、酷我、微信公众号等渠道。
### Layabox产业贡献
- LayaBox引擎的性能极致，让HTML5游戏的2D与3D产品达到APP的流畅性能。并先后推出APP级的HTML5首款重度动作类游戏、HTML5首款MMORPG游戏、HTML5首款MOBA游戏，HTML5首款3D ARPG游戏。为HTML5游戏行业的技术高度与可行性进行了一次又一次先行探索

- 唯一同时支持ActionScript3、JavaScript、TypeScript三种开发语言，Layabox让更多的开发者低成本进入HTML5行业，让开发者拥有更多语言的选择，让Flash AS3语言拥有着更广阔的应用前景。
 
- 一次开发同时发布APP、HTML5、Flash三种版本，Layabox让研发商以最小成本面向不同的市场。
 
- 除LayaAirIDE之外，Layabox还支持Unity3D、3Dmax、tiledMap、Flash Builder、FlashDevelop、Adobe Flash CS、VS Code、Spine、DragonBones大量知名的第三方工具用于开发HTML5游戏。形成完整的开发者工具链。

# 四、H5游戏引擎项目开发介绍
根据官网链接[ https://ldc.layabox.com/doc/?nav=zh-as-0-3-0](https://ldc.layabox.com/doc/?nav=zh-as-0-3-0)都一一做了相信说明，H5游戏初惯用业务框架MVC的设计模式
